05.07.2023



1. Препроцессор языка C.
Включение файлов.
Макросы (в качестве констант).
Макросы с аргументами (в качестве псевдофункций).
Условные директивы компиляции.

Пример examples\1.



2. Указатели.
Указателями называют и тип данных и переменные этого типа.
Например:
char * - тип данных указатель на char.
Переменные этого типа (указатели) хранят адрес переменной типа char.
Операция & (получение адреса) возвращает указатель на переменную:
char c;
char *p = &c;
char **pp = &p;	// Операция & как бы добавляет одну звёздочку к типу

Указатель - это совокупность адреса и типа.
Во время исполнения указатель хранит адрес переменной, на которую он указывает. А тип определяет генерируемые компилятором операции над указателем.
Операции над указателями:
1) разыменование:
*p - возвращает значение переменной, на которую указывает p
2) прибавление/вычитание числа
SomeType *p;
p += 10 ->	p = p + 10 * sizeof(SomeType)
3) вычитание указателей одного типа:
SomeType *p1;
SomeType *p2;
p1 - p2	->	(p1 - p2) / sizeof(SomeType)



3. Массивы
Массив - совокупность однотипных данных, расположенных в памяти непосредственно друг за другом. Массив однозначно определяется адресом начала и количеством элементов. Элемент массива однозначно определяется его индексом (номером местоположения в последовательности, начиная с 0).
Массивами называют и тип данных и переменные этого типа.
char buf[10]	- buf - это переменная (массив) типа "массив элементов типа char".
Инициализация массива:
int buf[] = {1, 2, 3};
int buf[2] = {1, 2};
int buf[10] = {1, 2, 3, 4};
char buf[] = "1234";
char buf[4] = "1234";
char buf[5] = "1234";



4. Массивы и указатели.
Вместо имени массива подставляется указатель на начало массива (т.е. указатель на нулевой элемент):
char buf[10];
char *p = buf;	// buf - указатель (char*) на начало массива
Взятие адреса массива также указывает на начало массива (т.е. buf и &buf означает одно и то же):
char *p = &buf;	// аналогично предыдущему p = buf

Операция обращения к элементу массива по индексу применяется к любому указателю (в том числе может быть применена к имени массива, которое означает указатель на нулевой элемент):
char buf[10];
char *p = buf;
p[i] -> *(p+i)
buf[i] -> *(buf+i)
i[p] -> *(i+p) = *(p+i) = p[i]



5. Статические многомерные массивы.
char buf[10][20];	// buf - переменная типа "массив из десяти элементов типа char [20]".
Строки многомерного массива хранятся в памяти последовательно.
buf[i][j]	-> *(buf + 20 * i + j)

char buf[10][20][30][40];
char *p = buf;
buf[1][2][3][4]	-> p[1*20*30*40 + 2*30*40 + 3*40 + 4]



6. Расположение данных в памяти.
пример examples\2

